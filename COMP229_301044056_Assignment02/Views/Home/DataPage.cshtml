@model IEnumerable<COMP229_301044056_Assignment02.Models.Recipe>

@{
    ViewBag.Title = "Recipes";
}

<h3 class="mt-auto">Recipe List</h3>

<div class="container">
    <div class="d-flex justify-content-end" style="float:right">
        @using (Html.BeginForm("DataPage", "Home", FormMethod.Get))
        {
            <b>Search By : </b>@Html.RadioButton("searchBy", "Name", true)<text>Name </text>
            @Html.RadioButton("searchBy", "Ingredient")<text>Ingredient </text><br />
            @Html.TextBox("search")<input type="submit" value="Search" />

        }
    </div>
    <div class="d-flex justify-content-start" style="float:left">
        @using (Html.BeginForm("DataPage", "Home", FormMethod.Get))
        {
            <label>Sort by: </label>
            <select class="ml-2 " name="Category">
                <option value="" disabled selected>Select Category</option>
                <option>Breakfast</option>
                <option>Appetizers</option>
                <option>Entree</option>
                <option>Desserts</option>
                <option>Beverages</option>
                <option>Snacks</option>
            </select>
            <input type="submit" class="filter" value="Apply" />
        }
    </div>
</div>


<div class="editLink" style="margin-left:auto; margin-right:auto">
    <form asp-action="Delete" asp-controller="Base" method="post">
        <table id="dataPageTable">
            @if (Model.Count()==0)
            {
                <tr>
                    <td colspan="5">No rows match search creteria</td>
                </tr>
            }
            @foreach (Recipe p in Model)
            {
                <tr>
                    <td class="displayTd1">@Html.ActionLink(@p.Name, "DisplayPage", "Home", new { RecipeID = p.RecipeID })</td>
                    <td class="displayTd">
                        <a class="btn btn-outline-info" asp-action="UserPage" asp-controller="Base" asp-route-RecipeID="@p.RecipeID">Comment</a>
                    </td>

                    @if (User.Identity.Name == p.UserId)
                    {
                        <td class="displayTd">
                            <a class="btn btn-outline-primary" asp-action="Edit" asp-controller="Base" asp-route-RecipeID="@p.RecipeID">Edit</a>
                        </td>
                        <td><input type="hidden" name="RecipeID" value="@p.RecipeID" /></td>
                        <td class="displayTd">
                            <a class="btn btn-outline-danger" asp-action="Delete" asp-controller="Base" asp-route-RecipeID="@p.RecipeID">Delete</a>
                        </td>
                    }
                    else
                    {

                        <td class="displayTd">
                            <button type="button" class="btn btn-secondary" disabled>Edit</button>
                        </td>
                        <td><input type="hidden" name="RecipeID" value="@p.RecipeID" /></td>
                        <td class="displayTd">
                            <button type="button" class="btn btn-secondary" disabled>Delete</button>
                        </td>
                    }


                </tr>
            }
        </table>
    </form>
    <p style="color:red; font-size:small;">@TempData["message"]</p>
</div>
